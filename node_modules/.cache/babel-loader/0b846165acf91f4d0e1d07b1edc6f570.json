{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\xpert-shop\\\\src\\\\containers\\\\registerForm\\\\registerForm.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport Input from \"../ui/input/input\";\nimport \"./registerForm.css\";\nimport axios from \"../../axios-users\";\nimport Spinner from \"../ui/spinner/spinner\";\nimport * as actions from \"../store/actions/index\";\n\nclass RegisterForm extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      registerForm: {\n        name: {\n          elementType: \"input\",\n          elementConfig: {\n            type: \"text\",\n            placeholder: \"Emri\"\n          },\n          value: \"\",\n          validation: {\n            required: true\n          },\n          valid: false,\n          touched: false,\n          labelName: \"Emri i Plotë\"\n        },\n        email: {\n          elementType: \"input\",\n          elementConfig: {\n            type: \"email\",\n            placeholder: \"Email\"\n          },\n          value: \"\",\n          validation: {\n            required: true,\n            isEmail: true\n          },\n          valid: false,\n          touched: false,\n          labelName: \"Adresa e Email\"\n        },\n        password: {\n          elementType: \"input\",\n          elementConfig: {\n            type: \"password\",\n            placeholder: \"Fjalëkalimi\"\n          },\n          value: \"\",\n          validation: {\n            required: true,\n            minLength: 6,\n            isPassword: true\n          },\n          valid: false,\n          touched: false,\n          labelName: \"Fjalëkalimi\",\n          passwordValidation: \"Fjalëkalimi duhet të ketë të paktën nga një karakter special, shkronja dhe numra.\"\n        },\n\n        /*passwordRepeat: {\r\n          elementType: \"input\",\r\n          elementConfig: {\r\n            type: \"password\",\r\n            placeholder: \"Fjalëkalimi sërish\",\r\n          },\r\n          value: \"\",\r\n          validation: {\r\n            required: true,\r\n            minLength: 6,\r\n            isPassword: true,\r\n          },\r\n          valid: false,\r\n          touched: false,\r\n          labelName: \"Konfirmo Fjalëkalimin\",\r\n        },*/\n        phoneNumber: {\n          elementType: \"input\",\n          elementConfig: {\n            type: \"tel\",\n            placeholder: \"+3556********\",\n            pattern: \"[+]{1}[0-9]{3}[0-9]{9}\"\n          },\n          value: \"\",\n          validation: {\n            required: true\n          },\n          valid: false,\n          touched: false,\n          labelName: \"Numri i Celularit\"\n        },\n        business: {\n          elementType: \"select\",\n          elementConfig: {\n            options: [{\n              value: \"individ\",\n              displayValue: \"Individ\"\n            }, {\n              value: \"biznes\",\n              displayValue: \"Biznes\"\n            }]\n          },\n          value: \"individ\",\n          validation: {},\n          valid: true,\n          labelName: \"Zgjidhni Llojin e biznesit\"\n        }\n      },\n      formIsValid: false,\n      loading: false\n    };\n\n    this.orderHandler = event => {\n      event.preventDefault();\n      this.setState({\n        loading: true\n      });\n      const formData = {};\n\n      for (let formElementIdentifier in this.state.registerForm) {\n        formData[formElementIdentifier] = this.state.registerForm[formElementIdentifier].value;\n      }\n\n      const register = {\n        userData: formData\n      };\n      axios.post(\"/registeredUsers.json\", register).then(response => {\n        this.setState({\n          loading: false\n        });\n        this.props.history.push(\"/\");\n      }).catch(error => {\n        this.setState({\n          loading: false\n        });\n      });\n    };\n\n    this.inputChangedHandler = (event, inputIdentifier) => {\n      const updatedRegisterForm = { ...this.state.registerForm\n      };\n      const updatedRegisterFormElement = { ...updatedRegisterForm[inputIdentifier]\n      };\n      updatedRegisterFormElement.value = event.target.value;\n      updatedRegisterFormElement.valid = this.checkValidity(updatedRegisterFormElement.value, updatedRegisterFormElement.validation);\n      updatedRegisterFormElement.touched = true;\n      updatedRegisterForm[inputIdentifier] = updatedRegisterFormElement;\n      let formIsValid = true;\n\n      for (let inputIdentifier in updatedRegisterForm) {\n        formIsValid = updatedRegisterForm[inputIdentifier].valid && formIsValid;\n      }\n\n      this.setState({\n        registerForm: updatedRegisterForm,\n        formIsValid: formIsValid\n      });\n    };\n  }\n\n  checkValidity(value, rules) {\n    let isValid = true;\n\n    if (rules.required) {\n      isValid = value.trim() !== \"\" && isValid;\n    }\n\n    if (rules.minLength) {\n      isValid = value.length >= rules.minLength && isValid;\n    }\n\n    if (rules.isEmail) {\n      const pattern = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;\n      isValid = pattern.test(value) && isValid;\n    }\n\n    if (rules.isPassword) {\n      const passw = /^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{7,15}$/;\n      isValid = passw.test(value) && isValid;\n    }\n\n    return isValid;\n  }\n\n  render() {\n    const registerFormElementsArray = [];\n\n    for (let key in this.state.registerForm) {\n      registerFormElementsArray.push({\n        id: key,\n        config: this.state.registerForm[key]\n      });\n    }\n\n    let form = /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: this.orderHandler,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"labelTitle\",\n        children: \"Rregjistrohuni p\\xEBr t\\xEB vazhduar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"labelSubtitle\",\n        children: \"B\\xEBhu pjes\\xEB e Xpert eShop\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this), registerFormElementsArray.map(formElement => /*#__PURE__*/_jsxDEV(Input, {\n        elementType: formElement.config.elementType,\n        elementConfig: formElement.config.elementConfig,\n        value: formElement.config.value,\n        labelName: formElement.config.labelName,\n        passwordMsg: formElement.config.passwordValidation,\n        changed: event => this.inputChangedHandler(event, formElement.id),\n        shouldValidate: formElement.config.validation,\n        touched: formElement.config.touched,\n        invalid: !formElement.config.valid\n      }, formElement.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"labelNotify\",\n        children: \"Fushat e sh\\xEBnuara me * jan\\xEB t\\xEB detyrueshme\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"labelButtons\",\n        children: \"DUKE U RREGJISTRUAR, JU KENI R\\xCBN\\xCB DAKORD ME TERMAT E P\\xCBRDORIMIT\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"loginButton\",\n        style: {\n          marginBottom: \"15px\"\n        },\n        type: \"submit\",\n        disabled: !this.state.formIsValid,\n        children: \"RREGJISTROHU\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"labelButtons\",\n        children: \"APO JENI TASHM\\xCB T\\xCB RREGJISTRUAR\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"/kycu\",\n        className: \"loginButton\",\n        style: {\n          marginBottom: \"15px\"\n        },\n        children: \"KYCU\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }, this);\n\n    if (this.state.loading) {\n      form = /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 14\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: form\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 12\n    }, this);\n  }\n\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onAuth: (email, password) => dispatch(actions.auth(email, password))\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(RegisterForm);","map":{"version":3,"sources":["C:/Users/User/Desktop/xpert-shop/src/containers/registerForm/registerForm.js"],"names":["React","Component","connect","Input","axios","Spinner","actions","RegisterForm","state","registerForm","name","elementType","elementConfig","type","placeholder","value","validation","required","valid","touched","labelName","email","isEmail","password","minLength","isPassword","passwordValidation","phoneNumber","pattern","business","options","displayValue","formIsValid","loading","orderHandler","event","preventDefault","setState","formData","formElementIdentifier","register","userData","post","then","response","props","history","push","catch","error","inputChangedHandler","inputIdentifier","updatedRegisterForm","updatedRegisterFormElement","target","checkValidity","rules","isValid","trim","length","test","passw","render","registerFormElementsArray","key","id","config","form","map","formElement","marginBottom","mapDispatchToProps","dispatch","onAuth","auth"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport Input from \"../ui/input/input\";\r\nimport \"./registerForm.css\";\r\nimport axios from \"../../axios-users\";\r\nimport Spinner from \"../ui/spinner/spinner\";\r\nimport * as actions from \"../store/actions/index\";\r\n\r\nclass RegisterForm extends Component {\r\n  state = {\r\n    registerForm: {\r\n      name: {\r\n        elementType: \"input\",\r\n        elementConfig: {\r\n          type: \"text\",\r\n          placeholder: \"Emri\",\r\n        },\r\n        value: \"\",\r\n        validation: {\r\n          required: true,\r\n        },\r\n        valid: false,\r\n        touched: false,\r\n        labelName: \"Emri i Plotë\",\r\n      },\r\n      email: {\r\n        elementType: \"input\",\r\n        elementConfig: {\r\n          type: \"email\",\r\n          placeholder: \"Email\",\r\n        },\r\n        value: \"\",\r\n        validation: {\r\n          required: true,\r\n          isEmail: true,\r\n        },\r\n        valid: false,\r\n        touched: false,\r\n        labelName: \"Adresa e Email\",\r\n      },\r\n      password: {\r\n        elementType: \"input\",\r\n        elementConfig: {\r\n          type: \"password\",\r\n          placeholder: \"Fjalëkalimi\",\r\n        },\r\n        value: \"\",\r\n        validation: {\r\n          required: true,\r\n          minLength: 6,\r\n          isPassword: true,\r\n        },\r\n        valid: false,\r\n        touched: false,\r\n        labelName: \"Fjalëkalimi\",\r\n        passwordValidation:\r\n          \"Fjalëkalimi duhet të ketë të paktën nga një karakter special, shkronja dhe numra.\",\r\n      },\r\n      /*passwordRepeat: {\r\n        elementType: \"input\",\r\n        elementConfig: {\r\n          type: \"password\",\r\n          placeholder: \"Fjalëkalimi sërish\",\r\n        },\r\n        value: \"\",\r\n        validation: {\r\n          required: true,\r\n          minLength: 6,\r\n          isPassword: true,\r\n        },\r\n        valid: false,\r\n        touched: false,\r\n        labelName: \"Konfirmo Fjalëkalimin\",\r\n      },*/\r\n      phoneNumber: {\r\n        elementType: \"input\",\r\n        elementConfig: {\r\n          type: \"tel\",\r\n          placeholder: \"+3556********\",\r\n          pattern: \"[+]{1}[0-9]{3}[0-9]{9}\",\r\n        },\r\n        value: \"\",\r\n        validation: {\r\n          required: true,\r\n        },\r\n        valid: false,\r\n        touched: false,\r\n        labelName: \"Numri i Celularit\",\r\n      },\r\n      business: {\r\n        elementType: \"select\",\r\n        elementConfig: {\r\n          options: [\r\n            { value: \"individ\", displayValue: \"Individ\" },\r\n            { value: \"biznes\", displayValue: \"Biznes\" },\r\n          ],\r\n        },\r\n        value: \"individ\",\r\n        validation: {},\r\n        valid: true,\r\n        labelName: \"Zgjidhni Llojin e biznesit\",\r\n      },\r\n    },\r\n    formIsValid: false,\r\n    loading: false,\r\n  };\r\n\r\n  orderHandler = (event) => {\r\n    event.preventDefault();\r\n    this.setState({ loading: true });\r\n    const formData = {};\r\n    for (let formElementIdentifier in this.state.registerForm) {\r\n      formData[formElementIdentifier] = this.state.registerForm[\r\n        formElementIdentifier\r\n      ].value;\r\n    }\r\n    const register = {\r\n      userData: formData,\r\n    };\r\n    axios\r\n      .post(\"/registeredUsers.json\", register)\r\n      .then((response) => {\r\n        this.setState({ loading: false });\r\n        this.props.history.push(\"/\");\r\n      })\r\n      .catch((error) => {\r\n        this.setState({ loading: false });\r\n      });\r\n  };\r\n\r\n  checkValidity(value, rules) {\r\n    let isValid = true;\r\n\r\n    if (rules.required) {\r\n      isValid = value.trim() !== \"\" && isValid;\r\n    }\r\n\r\n    if (rules.minLength) {\r\n      isValid = value.length >= rules.minLength && isValid;\r\n    }\r\n\r\n    if (rules.isEmail) {\r\n      const pattern = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;\r\n      isValid = pattern.test(value) && isValid;\r\n    }\r\n\r\n    if (rules.isPassword) {\r\n      const passw = /^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{7,15}$/;\r\n      isValid = passw.test(value) && isValid;\r\n    }\r\n\r\n    return isValid;\r\n  }\r\n\r\n  inputChangedHandler = (event, inputIdentifier) => {\r\n    const updatedRegisterForm = {\r\n      ...this.state.registerForm,\r\n    };\r\n    const updatedRegisterFormElement = {\r\n      ...updatedRegisterForm[inputIdentifier],\r\n    };\r\n    updatedRegisterFormElement.value = event.target.value;\r\n    updatedRegisterFormElement.valid = this.checkValidity(\r\n      updatedRegisterFormElement.value,\r\n      updatedRegisterFormElement.validation\r\n    );\r\n    updatedRegisterFormElement.touched = true;\r\n    updatedRegisterForm[inputIdentifier] = updatedRegisterFormElement;\r\n\r\n    let formIsValid = true;\r\n    for (let inputIdentifier in updatedRegisterForm) {\r\n      formIsValid = updatedRegisterForm[inputIdentifier].valid && formIsValid;\r\n    }\r\n\r\n    this.setState({\r\n      registerForm: updatedRegisterForm,\r\n      formIsValid: formIsValid,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const registerFormElementsArray = [];\r\n    for (let key in this.state.registerForm) {\r\n      registerFormElementsArray.push({\r\n        id: key,\r\n        config: this.state.registerForm[key],\r\n      });\r\n    }\r\n\r\n    let form = (\r\n      <form onSubmit={this.orderHandler}>\r\n        <label className=\"labelTitle\">Rregjistrohuni për të vazhduar</label>\r\n        <label className=\"labelSubtitle\">Bëhu pjesë e Xpert eShop</label>\r\n        {registerFormElementsArray.map((formElement) => (\r\n          <Input\r\n            key={formElement.id}\r\n            elementType={formElement.config.elementType}\r\n            elementConfig={formElement.config.elementConfig}\r\n            value={formElement.config.value}\r\n            labelName={formElement.config.labelName}\r\n            passwordMsg={formElement.config.passwordValidation}\r\n            changed={(event) => this.inputChangedHandler(event, formElement.id)}\r\n            shouldValidate={formElement.config.validation}\r\n            touched={formElement.config.touched}\r\n            invalid={!formElement.config.valid}\r\n          />\r\n        ))}\r\n        <label className=\"labelNotify\">\r\n          Fushat e shënuara me * janë të detyrueshme\r\n        </label>\r\n        <label className=\"labelButtons\">\r\n          DUKE U RREGJISTRUAR, JU KENI RËNË DAKORD ME TERMAT E PËRDORIMIT\r\n        </label>\r\n        <button\r\n          className=\"loginButton\"\r\n          style={{ marginBottom: \"15px\" }}\r\n          type=\"submit\"\r\n          disabled={!this.state.formIsValid}\r\n        >\r\n          RREGJISTROHU\r\n        </button>\r\n        <label className=\"labelButtons\">APO JENI TASHMË TË RREGJISTRUAR</label>\r\n        <a\r\n          href=\"/kycu\"\r\n          className=\"loginButton\"\r\n          style={{ marginBottom: \"15px\" }}\r\n        >\r\n          KYCU\r\n        </a>\r\n      </form>\r\n    );\r\n\r\n    if (this.state.loading) {\r\n      form = <Spinner />;\r\n    }\r\n\r\n    return <div>{form}</div>;\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    onAuth: (email, password) => dispatch(actions.auth(email, password)),\r\n  };\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(RegisterForm);\r\n"]},"metadata":{},"sourceType":"module"}